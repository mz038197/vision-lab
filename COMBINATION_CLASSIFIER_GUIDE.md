# 組合識別器使用指南

## 功能簡介

組合識別器 (Combination Classifier) 允許您設定多個模型的識別結果組合規則，當所有條件同時滿足時，系統會顯示一個自定義的最終類別。

## 使用場景示例

### 示例 1: 檢測「吃飯」動作
- **Face 條件**: Happy (笑臉)
- **Hand 條件**: Grab (抓握手勢)
- **最終類別**: 吃飯

當 Face 模型識別到 "Happy" 且 Hand 模型識別到 "Grab" 時，組合識別器會顯示「吃飯」。

### 示例 2: 檢測「打招呼」動作
- **Face 條件**: Smile (微笑)
- **Hand 條件**: Wave (揮手)
- **Body 條件**: Standing (站立)
- **最終類別**: 打招呼

### 示例 3: 檢測「思考」狀態
- **Face 條件**: Neutral (中性表情)
- **Hand 條件**: Chin (手托下巴)
- **最終類別**: 思考

## 使用步驟

### 1. 訓練模型
首先，您需要為每個想要使用的模型訓練分類器：
- **Face Trainer**: 訓練臉部表情分類（如 Happy, Sad, Neutral）
- **Hand Trainer**: 訓練手勢分類（如 Peace, Fist, Wave）
- **Body Trainer**: 訓練身體姿勢分類（如 Standing, Sitting, Running）

### 2. 啟動多個模型
在相機界面勾選您想要同時使用的模型：
- ✅ Face Mesh
- ✅ Hand Pose
- ✅ Body Pose

### 3. 創建組合規則

點擊「新增組合規則」按鈕，設定：

1. **Face 條件** (可選): 輸入 Face Trainer 訓練的類別名稱
2. **Hand 條件** (可選): 輸入 Hand Trainer 訓練的類別名稱
3. **Body 條件** (可選): 輸入 Body Trainer 訓練的類別名稱
4. **最終類別** (必填): 輸入當條件匹配時要顯示的類別名稱

**注意**: 至少需要設定一個條件。

### 4. 啟用規則
- 點擊規則左側的複選框來啟用/停用規則
- 啟用的規則會自動檢測匹配

### 5. 查看結果
當所有條件匹配時：
- 組合識別器頂部會以紫紅色漸變大字顯示最終類別
- 匹配的規則會用紫色邊框高亮顯示
- 顯示 ✅ 圖標表示成功匹配

## 規則管理

### 導出規則
點擊「導出規則」按鈕，將所有規則保存為 JSON 文件，方便分享和備份。

### 導入規則
點擊「導入規則」按鈕，載入之前保存的規則文件。

### 刪除規則
點擊規則右上角的垃圾桶圖標刪除規則。

## 高級使用技巧

### 1. 部分條件匹配
您可以只設定部分條件：
- 只設定 Face + Hand（不需要 Body）
- 只設定 Hand（單一條件）

### 2. 多個規則組合
可以創建多個規則來覆蓋不同的情境：
```
規則 1: Happy + Wave → 打招呼
規則 2: Sad + Fist → 生氣
規則 3: Neutral + Peace → 放鬆
```

### 3. 優先級
規則按創建順序檢查，第一個匹配的規則會被顯示。

### 4. 實時反饋
組合識別器會實時顯示每個模型當前的識別結果，幫助您調試規則：
- **藍色框**: Face 識別結果
- **橙色框**: Hand 識別結果
- **綠色框**: Body 識別結果

## 注意事項

1. **大小寫不敏感**: 規則匹配時不區分大小寫（"Happy" 等於 "happy"）
2. **精確匹配**: 類別名稱必須完全匹配（忽略大小寫）
3. **模型必須啟用**: 只有當對應的模型被啟用時，該條件才會被檢查
4. **訓練後才能匹配**: 確保每個使用的模型都已經訓練完成

## 實際應用場景

### 互動遊戲
根據玩家的表情和手勢組合觸發不同的遊戲動作。

### 手語識別
結合面部表情和手勢來識別更複雜的手語詞彙。

### 健康監測
檢測特定的姿勢和表情組合來識別健康狀態。

### 教育應用
檢測學生的參與度（表情 + 姿勢）。

### 智能家居控制
通過特定的動作組合來控制家居設備。

## 疑難排解

**問題**: 規則不匹配
- 確認所有相關模型都已啟用
- 檢查類別名稱是否拼寫正確
- 確認模型已經訓練並能正確識別

**問題**: 匹配延遲
- 這是正常的，因為需要等待所有模型都輸出結果
- 通常延遲在 100-200ms 之間

**問題**: 誤匹配
- 調整訓練數據以提高單個模型的準確度
- 添加更多條件來限制匹配範圍
- 使用更具區分性的類別名稱

